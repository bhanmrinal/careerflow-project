<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Careerflow Resume Optimizer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
                        <rect width="36" height="36" rx="10" fill="url(#logo-grad)"/>
                        <path d="M10 13h16M10 18h12M10 23h14" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
                        <circle cx="26" cy="23" r="3" fill="#06b6d4"/>
                        <defs>
                            <linearGradient id="logo-grad" x1="0" y1="0" x2="36" y2="36">
                                <stop stop-color="#06b6d4"/>
                                <stop offset="1" stop-color="#8b5cf6"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <span>Careerflow</span>
                </div>
            </div>

            <!-- Model Selection -->
            <div class="sidebar-section">
                <h3>AI Model</h3>
                <div class="model-selector">
                    <select id="model-select" class="model-dropdown">
                        <option value="llama-3.3-70b-versatile">Llama 3.3 70B</option>
                        <option value="llama-3.1-8b-instant">Llama 3.1 8B (Fast)</option>
                        <option value="mixtral-8x7b-32768">Mixtral 8x7B</option>
                        <option value="gemma2-9b-it">Gemma 2 9B</option>
                    </select>
                    <div class="model-info">
                        <span class="model-status" id="model-status">
                            <span class="pulse-dot"></span>
                            Connected
                        </span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Resume</h3>
                <div id="resume-status" class="resume-status">
                    <div class="status-icon">üìÑ</div>
                    <div class="status-text">
                        <span class="status-label">No resume uploaded</span>
                        <span class="status-detail">Upload to get started</span>
                    </div>
                </div>
                <label class="upload-btn">
                    <input type="file" id="resume-upload" accept=".pdf,.docx" hidden>
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M9 1v12M4 6l5-5 5 5M2 16h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Upload Resume
                </label>
            </div>

            <div class="sidebar-section">
                <h3>AI Agents</h3>
                <div class="agent-list">
                    <div class="agent-item" data-agent="company_research">
                        <div class="agent-icon">üè¢</div>
                        <div class="agent-info">
                            <span class="agent-name">Company Research</span>
                            <span class="agent-desc">Optimize for specific companies</span>
                        </div>
                    </div>
                    <div class="agent-item" data-agent="job_matching">
                        <div class="agent-icon">üéØ</div>
                        <div class="agent-info">
                            <span class="agent-name">Job Matching</span>
                            <span class="agent-desc">Match to job descriptions</span>
                        </div>
                    </div>
                    <div class="agent-item" data-agent="translation">
                        <div class="agent-icon">üåç</div>
                        <div class="agent-info">
                            <span class="agent-name">Translation</span>
                            <span class="agent-desc">Translate & localize</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Match Score Section -->
            <div class="sidebar-section" id="score-section" style="display: none;">
                <h3>Match Analysis</h3>
                <div class="score-card">
                    <div class="score-ring">
                        <svg viewBox="0 0 100 100">
                            <circle class="score-bg" cx="50" cy="50" r="45"/>
                            <circle class="score-progress" id="score-circle" cx="50" cy="50" r="45" 
                                stroke-dasharray="283" stroke-dashoffset="283"/>
                        </svg>
                        <div class="score-value" id="score-value">0%</div>
                    </div>
                    <div class="score-label">Overall Match</div>
                </div>
                <div class="score-breakdown" id="score-breakdown">
                    <!-- Breakdown items will be added dynamically -->
                </div>
            </div>

            <div class="sidebar-section" id="versions-section" style="display: none;">
                <h3>Version History</h3>
                <div id="versions-list" class="versions-list"></div>
            </div>

            <!-- Settings Button at Bottom -->
            <div class="sidebar-footer">
                <button class="settings-btn" id="settings-btn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M16.17 10c0-.34-.03-.67-.08-1l1.73-1.35a.42.42 0 00.1-.53l-1.64-2.84a.42.42 0 00-.5-.18l-2.04.82a7.5 7.5 0 00-1.73-1l-.31-2.17A.42.42 0 0011.28 1H8.01a.42.42 0 00-.41.35l-.31 2.17a7.5 7.5 0 00-1.73 1l-2.04-.82a.42.42 0 00-.5.18L1.38 6.72a.42.42 0 00.1.53L3.2 8.6c-.05.33-.08.66-.08 1s.03.67.08 1l-1.73 1.35a.42.42 0 00-.1.53l1.64 2.84c.1.18.32.25.5.18l2.04-.82c.53.4 1.1.74 1.73 1l.31 2.17c.04.2.21.35.41.35h3.27c.2 0 .37-.14.41-.35l.31-2.17a7.5 7.5 0 001.73-1l2.04.82c.19.07.4 0 .5-.18l1.64-2.84a.42.42 0 00-.1-.53L16.09 11c.05-.33.08-.66.08-1z" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    Settings
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Chat Header -->
            <header class="chat-header">
                <div class="header-left">
                    <button class="menu-toggle" id="menu-toggle">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <div class="header-info">
                        <h1>Resume Optimizer</h1>
                        <span class="header-status" id="connection-status">
                            <span class="status-dot"></span>
                            <span id="current-model">llama-3.3-70b-versatile</span>
                        </span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="action-btn" id="export-btn" title="Export Resume">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 1v12M6 9l4 4 4-4M3 15v2a2 2 0 002 2h10a2 2 0 002-2v-2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button class="action-btn" id="eval-btn" title="View Evaluation">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M18 10h-4l-3 9L7 1l-3 9H0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button class="action-btn" id="clear-chat" title="Clear chat">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 6h12M6 6V4a2 2 0 012-2h4a2 2 0 012 2v2M8 10v5M12 10v5M5 6l1 10a2 2 0 002 2h4a2 2 0 002-2l1-10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Chat Messages -->
            <div class="chat-container" id="chat-container">
                <div class="welcome-message" id="welcome-message">
                    <div class="welcome-icon">‚ú®</div>
                    <h2>Welcome to Careerflow</h2>
                    <p>Upload your resume and tell me how you'd like to optimize it. I'll use specialized AI agents to help you stand out.</p>
                    <div class="example-prompts">
                        <button class="example-prompt" data-prompt="Optimize my resume for Google">
                            üè¢ Optimize for Google
                        </button>
                        <button class="example-prompt" data-prompt="Translate my resume to Spanish for the Mexican market">
                            üåç Translate to Spanish
                        </button>
                        <button class="example-prompt" data-prompt="Match my resume to this job description and show me skill gaps">
                            üéØ Analyze job match
                        </button>
                    </div>
                    
                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <div class="stat-item">
                            <div class="stat-value">3</div>
                            <div class="stat-label">AI Agents</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">70B</div>
                            <div class="stat-label">Parameters</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">PDF/DOCX</div>
                            <div class="stat-label">Supported</div>
                        </div>
                    </div>
                </div>
                <div id="messages" class="messages"></div>
            </div>

            <!-- Chat Input -->
            <div class="chat-input-container">
                <div class="input-wrapper">
                    <button class="attach-btn" id="attach-btn" title="Attach file">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M17.5 9.5l-7.78 7.78a4.5 4.5 0 01-6.36-6.36l7.78-7.78a3 3 0 014.24 4.24l-7.78 7.78a1.5 1.5 0 01-2.12-2.12l7.07-7.07" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <textarea 
                        id="message-input" 
                        placeholder="Describe what you want to do with your resume..."
                        rows="1"
                    ></textarea>
                    <button id="send-btn" class="send-btn" disabled>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M18 2L9 11M18 2l-6 16-3-7-7-3 16-6z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                <div class="input-footer">
                    <span class="input-hint">Press Enter to send ‚Ä¢ Shift+Enter for new line</span>
                    <span class="char-count" id="char-count">0 / 4000</span>
                </div>
            </div>
        </main>

        <!-- Results Panel (Right Side) -->
        <aside class="results-panel" id="results-panel">
            <div class="panel-header">
                <div class="panel-tabs">
                    <button class="panel-tab active" data-tab="preview">Preview</button>
                    <button class="panel-tab" data-tab="changes">Changes</button>
                    <button class="panel-tab" data-tab="analysis">Analysis</button>
                </div>
                <button class="icon-btn" id="close-panel">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M15 5L5 15M5 5l10 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            
            <!-- Preview Tab -->
            <div class="panel-content tab-content active" id="preview-tab">
                <div class="empty-state" id="preview-empty">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <rect x="8" y="6" width="32" height="36" rx="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M16 18h16M16 26h12M16 34h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <p>Upload a resume to see preview</p>
                </div>
                <div id="resume-preview" class="resume-preview-content"></div>
            </div>
            
            <!-- Changes Tab -->
            <div class="panel-content tab-content" id="changes-tab">
                <div class="empty-state" id="changes-empty">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M24 8v32M8 24h32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <p>No changes yet</p>
                </div>
                <div id="changes-list" class="changes-list"></div>
            </div>
            
            <!-- Analysis Tab -->
            <div class="panel-content tab-content" id="analysis-tab">
                <div class="empty-state" id="analysis-empty">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <circle cx="24" cy="24" r="16" stroke="currentColor" stroke-width="2"/>
                        <path d="M24 14v10l7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <p>Run an analysis to see results</p>
                </div>
                <div id="analysis-content" class="analysis-content">
                    <!-- Analysis results will be added dynamically -->
                </div>
            </div>
        </aside>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="icon-btn modal-close" id="close-settings">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M15 5L5 15M5 5l10 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-content">
                <div class="settings-section">
                    <h3>Model Configuration</h3>
                    <div class="setting-item">
                        <label>Temperature</label>
                        <div class="slider-container">
                            <input type="range" id="temperature" min="0" max="100" value="70">
                            <span class="slider-value" id="temp-value">0.7</span>
                        </div>
                        <p class="setting-desc">Higher values make output more creative, lower values more focused</p>
                    </div>
                    <div class="setting-item">
                        <label>Max Tokens</label>
                        <div class="slider-container">
                            <input type="range" id="max-tokens" min="256" max="4096" value="2048" step="256">
                            <span class="slider-value" id="tokens-value">2048</span>
                        </div>
                        <p class="setting-desc">Maximum length of generated response</p>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Output Format</h3>
                    <div class="setting-item">
                        <label>Export Format</label>
                        <select id="export-format" class="setting-select">
                            <option value="pdf">PDF Document</option>
                            <option value="docx">Word Document</option>
                            <option value="txt">Plain Text</option>
                            <option value="json">JSON (Structured)</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Interface</h3>
                    <div class="setting-item toggle-item">
                        <label>Show Agent Reasoning</label>
                        <label class="toggle">
                            <input type="checkbox" id="show-reasoning" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item toggle-item">
                        <label>Auto-expand Results Panel</label>
                        <label class="toggle">
                            <input type="checkbox" id="auto-expand" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="reset-settings">Reset to Default</button>
                <button class="btn-primary" id="save-settings">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Evaluation Modal -->
    <div class="modal-overlay" id="eval-modal">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h2>Resume Evaluation</h2>
                <button class="icon-btn modal-close" id="close-eval">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M15 5L5 15M5 5l10 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-content">
                <div class="eval-grid">
                    <div class="eval-card">
                        <div class="eval-score" id="eval-overall">--</div>
                        <div class="eval-label">Overall Score</div>
                        <div class="eval-bar">
                            <div class="eval-bar-fill" id="overall-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="eval-card">
                        <div class="eval-score" id="eval-keywords">--</div>
                        <div class="eval-label">Keyword Match</div>
                        <div class="eval-bar">
                            <div class="eval-bar-fill" id="keywords-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="eval-card">
                        <div class="eval-score" id="eval-format">--</div>
                        <div class="eval-label">Format Quality</div>
                        <div class="eval-bar">
                            <div class="eval-bar-fill" id="format-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="eval-card">
                        <div class="eval-score" id="eval-impact">--</div>
                        <div class="eval-label">Impact Statements</div>
                        <div class="eval-bar">
                            <div class="eval-bar-fill" id="impact-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="eval-details" id="eval-details">
                    <div class="eval-summary-section">
                        <h3>Summary</h3>
                        <p id="eval-summary">Upload a resume and run an analysis to see detailed evaluation</p>
                    </div>
                    <div class="eval-lists">
                        <div class="eval-list-section">
                            <h4>Strengths</h4>
                            <ul id="eval-strengths" class="eval-list strengths-list">
                                <li>Upload resume to see strengths</li>
                            </ul>
                        </div>
                        <div class="eval-list-section">
                            <h4>Areas for Improvement</h4>
                            <ul id="eval-improvements" class="eval-list improvements-list">
                                <li>Upload resume to see improvements</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <span class="loading-text">Processing your request...</span>
            <div class="loading-progress">
                <div class="loading-progress-bar" id="loading-bar"></div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
